@{
    ViewData["Title"] = "Ventas";
}

@model List<SistemaInventario.Models.Producto>

<div class="container mt-5">
    <div class="row">
        <div class="col-12">
            <h2>Módulo de Ventas</h2>
            <p>Bienvenido, @Context.Session.GetString("Nombre")</p>
        </div>
    </div>
    
    <div class="row mt-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5>Nueva Venta</h5>
                </div>
                <div class="card-body">
                    
                    <div style="display:flex; flex-direction:row; justify-content:space-between;">

                        <div>

                            <table class="table table-bordered mt-3">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Nombre</th>
                                        <th>Precio</th>
                                        <th>Stock</th>
                                        <th>Stock Mínimo</th>
                                        <th>Estado</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var producto in Model.Where(x => x.Activo == 1 && x.Stock > 0))
                                    {
                                        <tr>
                                            <td>@producto.Id</td>
                                            <td>@producto.Nombre</td>
                                            <td>$@producto.Precio</td>
                                            <td style="@(producto.Stock < producto.MInimoStock ? "background-color: red; color: white;" : "")">
                                                @producto.Stock
                                            </td>
                                            <td>
                                                <button class="btn btn-sm btn-warning" onclick="editarProducto(@producto.Id, '@producto.Nombre', @producto.Precio, @producto.Stock, @producto.MInimoStock, @producto.Activo)">Editar</button>
                                                <a href="@Url.Action("EliminarProducto", "Home", new { id = producto.Id, estado = producto.Activo == 1 ? 0 : 1 })" class="btn btn-sm @(producto.Activo == 1 ? "btn-danger" : "btn-success")" onclick="return confirm('Está seguro?')">
                                                    @(producto.Activo == 1 ? "Desactivar" : "Activar")
                                                </a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>


                        <div>




                        </div>

                    </div>


                </div>
            </div>
        </div>
    </div>
    

</div>
